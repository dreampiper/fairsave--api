(()=>{"use strict";var e={691:(e,t,o)=>{o.r(t)}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function i(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}s((n=n.apply(e,t||[])).next())}))};let t,n;o(691);const a="/*TODO:*/",l={};["upload","upload2","saveBookmarkInput","getBookmarkInput"].forEach((e=>{l[e]=document.getElementById(e)}));const i={};["tutorial","homeButtons","fileUploadStats","fileUploadStats--title","fileUploadStats--progress-bar","fileUploadStats--uploadPercent","findModal","findModalContainer","saveModal","saveModalContainer","view1","view2","imageHolder"].forEach((e=>{i[e]=document.getElementById(e)}));const r={};function s(e){i.homeButtons.style.display="none",i.tutorial.style.display="none",i.fileUploadStats.style.display="flex";const t=document.querySelector("#fileUploadStats--progress-bar > div");let o=parseInt(t.style.width,10);o=0,t.style.width="0%",i["fileUploadStats--title"].innerHTML=e.name,i["fileUploadStats--uploadPercent"].innerHTML="0%"}function d(e){const o=new FormData;o.append("image",e);const l=new XMLHttpRequest;l.upload.addEventListener("progress",(e=>function(e){const t=e.loaded/e.total*100,o="#fileUploadStats--progress-bar > div";document.querySelector(o).style.width=t+"%",i["fileUploadStats--uploadPercent"].innerHTML=Math.round(t)+"%"}(e)),!0),l.onload=function(){const e=JSON.parse(this.response);t=e.msg.cid,n=e.msg.title},l.addEventListener("load",(()=>(i.view1.style.display="none",void(i.view2.style.display="flex"))),!0),l.addEventListener("error",(()=>alert("Upload Failed")),!0),l.addEventListener("abort",(()=>alert("Upload Aborted")),!0),l.open("POST",a+"/api/upload-image"),l.send(o)}function c(e){const t=i.imageHolder;for(;t.firstChild;)t.removeChild(t.firstChild);var o=new FileReader;const n=document.createElement("img");n.title=e.name,t.appendChild(n),o.onload=function(e){n.src=e.target.result},o.readAsDataURL(e)}["find","bookmark","getBookmark","saveBookmark","share"].forEach((e=>{r[e]=document.getElementById(e)})),l.upload.onchange=()=>{const e=l.upload.files[0];s(e),d(e),c(e)},l.upload2.onchange=()=>{i.view1.style.display="flex",i.view2.style.display="none";const e=l.upload2.files[0];c(e),s(e),d(e)},r.find.onclick=()=>{i.findModal.style.display="flex"},r.bookmark.onclick=()=>{i.saveModal.style.display="flex"},r.share.onclick=()=>{!function(t){e(this,void 0,void 0,(function*(){return"clipboard"in navigator?yield navigator.clipboard.writeText(t):document.execCommand("copy",!0,t)}))}(`https://${t}.ipfs.w3s.link`),alert("Copied Link")},r.saveBookmark.onclick=e=>{e.preventDefault(),function(){const e=l.saveBookmarkInput.value;if(e.length<2)return alert("tag too short");const o={cid:t,title:n,tag:e},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};fetch(a+"/api/bookmark-image",i).then((e=>{if(!e.ok)throw Error(""+e.status);return e.json()})).then((e=>{alert("saved"),console.log(e,"save-bookmark")})).catch((e=>{console.log(e)}))}()},r.getBookmark.onclick=e=>{e.preventDefault(),function(){const e=l.getBookmarkInput.value;if(e.length<3)return alert("tag too short");const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:e})};fetch(a+"/api/get-bookmarks",t).then((e=>{if(!e.ok)throw Error(""+e.status);return e.json()})).then((e=>{for(var t=document.querySelector(".modal .findResult");t.firstChild;)t.removeChild(t.firstChild);e.msg.forEach((e=>{const o=`\n        <a href="https://${e.cid}.ipfs.w3s.link">\n        <span>${e.title}</span>\n        <span>${new Date(e.createdAt).toDateString()}</span>\n        </a>\n      `;t.insertAdjacentHTML("beforeend",o)})),console.log(e)})).catch((e=>{console.log(e)}))}()},i.findModal.onclick=()=>{i.findModal.style.display="none"},i.findModalContainer.onclick=function(e){e.stopPropagation()},i.saveModal.onclick=()=>{i.saveModal.style.display="none"},i.saveModalContainer.onclick=function(e){e.stopPropagation()}})()})();
//# sourceMappingURL=index.23b74acf1271e9aacfed.js.map